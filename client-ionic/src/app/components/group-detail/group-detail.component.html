<ion-progress-bar type="indeterminate" *ngIf='showBar'></ion-progress-bar>
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title text-center>
      Details of Group: {{ group.name }} 
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content text-center>

    <ion-grid *ngIf='loaded'>

      <ion-row>
        <ion-col size='12'>
            <h1>{{ group.name }}</h1>
        </ion-col>
        <ion-col size='12'>
            {{ group.description }}
        </ion-col>
      </ion-row>

      <ion-row>
        
        <ion-col size-sm='12' size-md='6'>
          <table class='table table-bordered table-striped' [mfData]="group.teams" mfSortBy="position" mfSortOrder="asc" #mf1="mfDataTable">
            <thead>
              <tr>
                <th class="header-sort">
                    <mfDefaultSorter by="position">Position</mfDefaultSorter>
                </th>
                <th class="header-sort">
                    <mfDefaultSorter by="fullName">Name</mfDefaultSorter>
                </th>
                <th class="header-sort">
                    <mfDefaultSorter by="winRatio">Win ratio</mfDefaultSorter>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor='let team of mf1.data'>
                <td>{{ team.winRatio ? team.position : '-' }}</td>
                <td>
                  <a routerLink='/teams/{{team._id}}'  class="text">
                  {{ team.fullName }}
                  </a>
                </td>
                <td>{{ team.winRatio ? team.winRatio : '-' }}</td>
              </tr>
              <tr *ngIf='group.teams.length === 0'>
                <td colspan='3'>There are no teams</td>
              </tr>
              <tr>
                <td colspan='3'>
                  <ion-select placeholder="Select team to add" multiple="true" cancelText="Cancel" okText="OK" 
                  [(ngModel)]='addTeamsSelect' (ionChange)='changeTeams(group)' selectedText='Add or remove teams'>
                    <ion-select-option *ngFor='let team of teams; let i = index' value="{{team._id}}">
                      {{ team.name + ' ' + team.lastname }}
                    </ion-select-option>
                  </ion-select>
                </td>
              </tr>
            </tbody>
          </table>
        </ion-col>

        <br>

        <ion-col size-sm='12' size-md='6'>
          <table class='table table-bordered table-striped' [mfData]="group.score" #mf2="mfDataTable">
            <thead>
              <tr>
                <th class="header-sort">
                    <mfDefaultSorter by="sortTeam1">Team 1</mfDefaultSorter>
                </th>
                <th class="header-sort">
                    <mfDefaultSorter by="scoreString">SCORE</mfDefaultSorter>
                </th>
                <th class="header-sort">
                    <mfDefaultSorter by="sortTeam2">Team 2</mfDefaultSorter>
                </th>
                <th>Edit Score</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor='let game of mf2.data; let i = index'>
                <td>{{ game.score[0].teamName }}</td>
                <td>
                  <a routerLink='/games/{{game._id}}'  class="text">
                    {{ game.scoreString }}
                  </a>
                </td>
                <td>{{ game.score[1].teamName }}</td>
                 <td><ion-icon class="edit color" (click)='openModal(game)' name="create"></ion-icon></td>
              </tr>
              <tr *ngIf='group.score.length === 0'>
                <td colspan='3'>There are no scores</td>
              </tr>
            </tbody>
          </table>
        </ion-col>
        
      </ion-row>

    </ion-grid>

</ion-content>
